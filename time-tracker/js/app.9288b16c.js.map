{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Timeslot.vue?b7e9","webpack:///./src/App.vue?2d61","webpack:///./src/utils.js","webpack:///./src/components/Task.vue?b3de","webpack:///./src/components/Timeslot.vue?4e27","webpack:///src/components/Timeslot.vue","webpack:///./src/components/Timeslot.vue?9189","webpack:///./src/components/Timeslot.vue","webpack:///src/components/Task.vue","webpack:///./src/components/Task.vue?a757","webpack:///./src/components/Task.vue","webpack:///./src/components/ConfirmDialog.vue?563b","webpack:///src/components/ConfirmDialog.vue","webpack:///./src/components/ConfirmDialog.vue?7046","webpack:///./src/components/ConfirmDialog.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/components/ConfirmDialog.vue?9d4f","webpack:///./src/App.vue?a173","webpack:///./src/components/Task.vue?5d72"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","class","loaded","dropzone","attrs","staticClass","rootTasks","on","$event","clearAll","clientY","_v","_e","type","indexOf","_k","keyCode","inputTask","target","visible","absoluteTotalDuration","domProps","_s","formatDuration","totalDuration","showSeconds","_l","task","id","addTask","removeTaskConfirmation","resetTask","startTask","stopTask","moveTask","changeTimeslotBegin","changeTimeslotEnd","removeTimeslotConfirmation","timeslotToNewTask","timeslotToTask","confirmation","staticRenderFns","secondsToDisplayDuration","totalSeconds","showDays","showHours","showMinutes","isNegative","seconds","Math","abs","components","label","sec","show","filter","v","output","last","component","floor","saveToStorage","localStorage","setItem","JSON","stringify","getFromStorage","getItem","parse","err","console","error","runIfFn","fn","thisArg","args","arguments","zeropad","nr","pad","input","char","str","timeToTimestamp","time","timeRe","matches","exec","warn","hr","parseInt","min","dt","Date","setHours","setMinutes","setSeconds","getTime","duration","showZero","rounded","round","format","test","formatTimestamp","timestamp","outputIfInvalid","date","hours","getHours","minutes","getMinutes","active","isActive","isActiveAncestor","dragging","subtask","parentId","collapsed","$emit","timeslots","subTasks","taskId","posY","editName","toggleEdit","directives","rawName","_source","expression","cancelEdit","undefined","composing","$set","timeslot","subTask","timeslotId","begin","end","props","mounted","$el","addEventListener","onDragStart","onDragEnd","document","onClick","beforeDestroy","removeEventListener","methods","ev","stopPropagation","dataTransfer","effectAllowed","dropEffect","setData","setTimeout","preventDefault","parentNode","Number","el","onDragOver","onDragLeave","onDrop","isNaN","onDropTask","onDropTimeslot","config","text","cancelText","cancel","okText","ok","onKeyup","dialog","rearrangeable","top","clientHeight","minMargin","viewport","height","dialogRect","style","position","getViewport","left","width","innerWidth","innerHeight","inserted","Task","ConfirmDialog","nextId","initialId","tasksById","timeslotsById","now","always","savedState","assign","state","computed","tasks","values","timeslotsByTask","computedTasks","map","getComputedTask","activeTask","find","ancestors","reduce","getTaskDuration","getComputedTimeslot","some","getSubTasks","getTimeslotDuration","getAncestors","parent","cache","isAncestor","taskB","taskA","save","inputElement","newTask","createTask","updateTask","changeTimeslotTimestamp","updateTimeslot","isTimeslot","updateFn","currentTimeslot","doneFn","oldTask","removeTask","Array","isArray","showConfirmation","clearConfirmation","evt","keys","forEach","createTimeslot","setNow","removeTimeslot","remove","clearTimeslots","ts","subTasksSeconds","taskSeconds","updateDocumentTitle","title","documentTitle","mainLoop","$watch","debouncedSave","Vue","productionTip","render","h","App","$mount"],"mappings":"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","file":"js/app.9288b16c.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timeslot.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timeslot.vue?vue&type=style&index=0&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ loaded: 1, dropzone: _vm.dropzone },attrs:{\"id\":\"time-tracker\"}},[_c('main',[_c('div',{staticClass:\"top-container\"},[_c('div',{staticClass:\"left\"},[(_vm.rootTasks.length > 0)?_c('button',{staticClass:\"remove-all\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.clearAll($event.clientY)}}},[_c('i',{staticClass:\"far fa-trash-alt\"}),_c('span',{staticClass:\"text\"},[_vm._v(\"remove all\")])]):_vm._e()]),_c('div',{staticClass:\"center\"},[_c('input',{staticClass:\"new-task\",attrs:{\"type\":\"text\",\"placeholder\":\"New task\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.inputTask($event.target)}}})]),_c('div',{staticClass:\"right\"},[_c('div',{staticClass:\"total-duration\",class:{ visible: _vm.absoluteTotalDuration > 0 }},[_c('i',{staticClass:\"far fa-clock\"}),_c('span',{staticClass:\"clock\",domProps:{\"textContent\":_vm._s(_vm.formatDuration(_vm.totalDuration, { showSeconds: _vm.absoluteTotalDuration < 60 }))}})])])]),_vm._l((_vm.rootTasks),function(task){return _c('Task',{key:task.id,attrs:{\"task\":task},on:{\"add-task\":function($event){return _vm.addTask($event)},\"remove-task-confirmation\":function($event){return _vm.removeTaskConfirmation($event)},\"reset-task\":function($event){return _vm.resetTask($event)},\"start-task\":function($event){return _vm.startTask($event)},\"stop-task\":function($event){return _vm.stopTask($event)},\"move-task\":function($event){return _vm.moveTask($event)},\"change-timeslot-begin\":function($event){return _vm.changeTimeslotBegin($event)},\"change-timeslot-end\":function($event){return _vm.changeTimeslotEnd($event)},\"remove-timeslot-confirmation\":function($event){return _vm.removeTimeslotConfirmation($event)},\"timeslot-to-new-task\":function($event){return _vm.timeslotToNewTask($event)},\"timeslot-to-task\":function($event){return _vm.timeslotToTask($event)}}})})],2),(_vm.confirmation.ok)?_c('ConfirmDialog',{attrs:{\"config\":_vm.confirmation}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export {\r\n  secondsToDisplayDuration,\r\n  saveToStorage,\r\n  getFromStorage,\r\n  timeToTimestamp,\r\n  sort,\r\n  zeropad,\r\n  pad,\r\n  formatDuration,\r\n  formatTimestamp,\r\n  runIfFn,\r\n};\r\n\r\n/**\r\n * Converts the given amount of total seconds to a display format (e.g. 2d5h6m1s)\r\n * For example, input 100950 would yield 1d4h2m30s\r\n * @param {number} totalSeconds The seconds to convert to XhYmZs format\r\n * @param {{showDays: boolean, showHours: boolean, showMinutes: boolean, showSeconds: boolean}} parts Specify which parts to show in the output\r\n */\r\nfunction secondsToDisplayDuration(\r\n  totalSeconds,\r\n  { showDays = true, showHours = true, showMinutes = true, showSeconds = true } = {}\r\n) {\r\n  const isNegative = totalSeconds < 0;\r\n\r\n  let seconds = Math.abs(totalSeconds);\r\n\r\n  const components = [\r\n    { label: \"d\", sec: 24 * 60 * 60, show: showDays },\r\n    { label: \"h\", sec: 60 * 60, show: showHours },\r\n    { label: \"m\", sec: 60, show: showMinutes },\r\n    { label: \"s\", sec: 1, show: showSeconds },\r\n  ].filter(v => v.show);\r\n\r\n  let output = \"\";\r\n  const last = components[components.length - 1];\r\n  for (const component of components) {\r\n    const value = Math.floor(seconds / component.sec);\r\n    seconds %= component.sec;\r\n\r\n    if (value > 0 || (!output && component === last)) {\r\n      output += value + component.label;\r\n    }\r\n  }\r\n\r\n  return (isNegative ? \"-\" : \"\") + output;\r\n}\r\n\r\nfunction saveToStorage(key, value) {\r\n  if (!window.localStorage) {\r\n    return;\r\n  }\r\n\r\n  window.localStorage.setItem(key, JSON.stringify(value));\r\n}\r\n\r\nfunction getFromStorage(key) {\r\n  if (!window.localStorage) {\r\n    return null;\r\n  }\r\n\r\n  try {\r\n    var value = window.localStorage.getItem(key);\r\n    return JSON.parse(value);\r\n  } catch (err) {\r\n    console.error(err);\r\n  }\r\n}\r\n\r\nfunction runIfFn(fn, thisArg) {\r\n  if (typeof fn === \"function\") {\r\n    var args = [].slice.apply(arguments).slice(2);\r\n    fn.apply(thisArg, args);\r\n  }\r\n}\r\n\r\n/**\r\n * Zeropads the given number (or string).\r\n * @param {string|number} nr Number to zeropad\r\n * @param {number} length Length to pad to\r\n */\r\nfunction zeropad(nr, length) {\r\n  return pad(nr, \"0\", length);\r\n}\r\n\r\n/**\r\n * Pads the given input string from the left with the given character until the input string reaches the specified length\r\n * @param {number|string} input String to pad\r\n * @param {string} char Pad character\r\n * @param {number} length Length to pad input to\r\n * @returns {string} Padded string\r\n */\r\nfunction pad(input, char, length) {\r\n  // Force to string\r\n  let str = `${input}`;\r\n  while (str.length < length) {\r\n    str = char + str;\r\n  }\r\n  return str;\r\n}\r\n\r\n/**\r\n * Converts the given time string to a timestamp. Only supports HH:mm and interprets it as a time of the current day in the local timezone.\r\n * @param {string} time Time string to convert to a timestamp.\r\n */\r\nfunction timeToTimestamp(time) {\r\n  const timeRe = /^([012]?[0-9]):?([0-5][0-9])$/;\r\n  const matches = timeRe.exec(time);\r\n\r\n  if (matches == null || matches.length !== 3) {\r\n    if (time) {\r\n      console.warn(`Invalid time string, should match RegExp ${timeRe} but got \"${time}\"`);\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  const hr = parseInt(matches[1], 10);\r\n  const min = parseInt(matches[2], 10);\r\n\r\n  const dt = new Date();\r\n  dt.setHours(hr);\r\n  dt.setMinutes(min);\r\n  dt.setSeconds(0, 0);\r\n\r\n  return dt.getTime();\r\n}\r\n\r\nfunction formatDuration(\r\n  duration,\r\n  { showZero = true, showSeconds = true, showMinutes = true, showHours = true, showDays = true } = {}\r\n) {\r\n  const rounded = Math.round(duration);\r\n  const format = secondsToDisplayDuration(rounded, {\r\n    showDays,\r\n    showSeconds,\r\n    showMinutes,\r\n    showHours,\r\n  });\r\n\r\n  if (!showZero && /^-?0[dhms]$/.test(format)) {\r\n    return null;\r\n  } else {\r\n    return format;\r\n  }\r\n}\r\n\r\nfunction formatTimestamp(timestamp, outputIfInvalid) {\r\n  if (typeof timestamp !== \"number\") {\r\n    if (timestamp != null) {\r\n      // User did pass in something so warn about wrong input here.\r\n      console.warn(`Timestamp should be a number, but got a ${typeof timestamp}`);\r\n    }\r\n\r\n    return outputIfInvalid;\r\n  }\r\n\r\n  const date = new Date(timestamp);\r\n\r\n  var hours = date.getHours();\r\n  var minutes = date.getMinutes();\r\n\r\n  return zeropad(hours, 2) + \":\" + zeropad(minutes, 2);\r\n}\r\n\r\nfunction sort(array, selector) {\r\n  return array.sort((a, b) => {\r\n    const vA = selector(a);\r\n    const vB = selector(b);\r\n    return vA > vB ? 1 : vB > vA ? -1 : 0;\r\n  });\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"task\",class:{\n    active: _vm.task.isActive,\n    'active-ancestor': _vm.task.isActiveAncestor,\n    dropzone: _vm.dropzone,\n    dragging: _vm.dragging,\n    subtask: _vm.task.parentId != null,\n    collapsed: _vm.collapsed,\n  }},[_c('div',{staticClass:\"task-head\",attrs:{\"draggable\":\"true\"}},[_c('div',{staticClass:\"left\"},[(!_vm.task.isActive)?_c('button',{attrs:{\"type\":\"button\",\"title\":\"Start\"},on:{\"click\":function($event){return _vm.$emit('start-task', _vm.task.id)}}},[_c('i',{staticClass:\"fas fa-play\"})]):_vm._e(),(_vm.task.isActive)?_c('button',{attrs:{\"type\":\"button\",\"title\":\"Stop\"},on:{\"click\":function($event){return _vm.$emit('stop-task', _vm.task.id)}}},[_c('i',{staticClass:\"fas fa-stop\"})]):_vm._e(),_c('button',{staticClass:\"add-subtask\",attrs:{\"type\":\"button\",\"title\":\"Add subtask\"},on:{\"click\":function($event){return _vm.$emit('add-task', { parentId: _vm.task.id })}}},[_c('i',{staticClass:\"fas fa-plus-circle\"})]),(_vm.task.timeslots.length || _vm.task.subTasks.length)?_c('button',{staticClass:\"toggle-collapse\",attrs:{\"type\":\"button\",\"title\":_vm.collapsed ? 'Expand' : 'Collapse'},on:{\"click\":function($event){_vm.collapsed = !_vm.collapsed}}},[(_vm.collapsed)?_c('i',{staticClass:\"fas fa-caret-down\"}):_vm._e(),(!_vm.collapsed)?_c('i',{staticClass:\"fas fa-caret-up\"}):_vm._e()]):_vm._e(),_c('button',{attrs:{\"type\":\"button\",\"title\":\"Remove\"},on:{\"click\":function($event){return _vm.$emit('remove-task-confirmation', { taskId: _vm.task.id, posY: $event.clientY })}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})])]),_c('div',{staticClass:\"center\"},[(!_vm.editName)?_c('div',{staticClass:\"task-name\",domProps:{\"textContent\":_vm._s(_vm.task.name)},on:{\"click\":function($event){return _vm.toggleEdit()}}}):_vm._e(),(_vm.editName)?_c('input',{directives:[{name:\"focus\",rawName:\"v-focus\"},{name:\"model\",rawName:\"v-model\",value:(_vm.task._source.name),expression:\"task._source.name\"}],staticClass:\"task-name edit\",attrs:{\"type\":\"text\",\"placeholder\":\"Task name\"},domProps:{\"value\":(_vm.task._source.name)},on:{\"keyup\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.cancelEdit()},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"escape\",undefined,$event.key,undefined)){ return null; }return _vm.cancelEdit()}],\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.task._source, \"name\", $event.target.value)}}}):_vm._e()]),_c('div',{staticClass:\"right\"},[_c('div',{staticClass:\"task-duration-wrapper\"},[_c('span',{staticClass:\"task-duration\",domProps:{\"textContent\":_vm._s(_vm.formatDuration(_vm.task.duration, { showZero: false, showSeconds: _vm.task.duration < 60 }))}})])])]),(_vm.task.timeslots.length || _vm.task.subTasks.length)?_c('div',{staticClass:\"task-body\"},[(_vm.task.timeslots.length)?_c('div',{staticClass:\"timeslots\"},_vm._l((_vm.task.timeslots),function(timeslot){return _c('Timeslot',{key:timeslot.id,attrs:{\"timeslot\":timeslot,\"task\":_vm.task},on:{\"change-timeslot-begin\":function($event){return _vm.$emit('change-timeslot-begin', $event)},\"change-timeslot-end\":function($event){return _vm.$emit('change-timeslot-end', $event)},\"remove-timeslot-confirmation\":function($event){return _vm.$emit('remove-timeslot-confirmation', $event)},\"timeslot-to-new-task\":function($event){return _vm.$emit('timeslot-to-new-task', $event)},\"timeslot-to-task\":function($event){return _vm.$emit('timeslot-to-task', $event)}}})}),1):_vm._e(),(_vm.task.subTasks.length)?_c('div',{staticClass:\"subtasks\"},_vm._l((_vm.task.subTasks),function(subTask){return _c('Task',{key:subTask.id,attrs:{\"task\":subTask},on:{\"add-task\":function($event){return _vm.$emit('add-task', $event)},\"remove-task-confirmation\":function($event){return _vm.$emit('remove-task-confirmation', $event)},\"reset-task\":function($event){return _vm.$emit('reset-task', $event)},\"start-task\":function($event){return _vm.$emit('start-task', $event)},\"stop-task\":function($event){return _vm.$emit('stop-task', $event)},\"move-task\":function($event){return _vm.$emit('move-task', $event)},\"change-timeslot-begin\":function($event){return _vm.$emit('change-timeslot-begin', $event)},\"change-timeslot-end\":function($event){return _vm.$emit('change-timeslot-end', $event)},\"remove-timeslot-confirmation\":function($event){return _vm.$emit('remove-timeslot-confirmation', $event)},\"timeslot-to-new-task\":function($event){return _vm.$emit('timeslot-to-new-task', $event)},\"timeslot-to-task\":function($event){return _vm.$emit('timeslot-to-task', $event)}}})}),1):_vm._e()]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"timeslot\",class:{ active: _vm.timeslot.isActive, dragging: _vm.dragging },attrs:{\"draggable\":\"true\"}},[_c('span',{staticClass:\"timeslot-controls\"},[_c('span',{staticClass:\"timeslot-control\",attrs:{\"title\":\"Move to new subtask\"},on:{\"click\":function($event){return _vm.$emit('timeslot-to-new-task', _vm.timeslot.id)}}},[_c('i',{staticClass:\"far fa-window-maximize\"})]),_c('span',{staticClass:\"timeslot-control timeslot-remove\",attrs:{\"title\":\"Remove\"},on:{\"click\":function($event){return _vm.$emit('remove-timeslot-confirmation', { timeslotId: _vm.timeslot.id, posY: $event.clientY })}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})])]),_c('span',{staticClass:\"timeslot-period\"},[_c('span',{staticClass:\"timeslot-begin\"},[(_vm.begin == null)?_c('span',{domProps:{\"textContent\":_vm._s(_vm.formatTimestamp(_vm.timeslot.begin, '???'))},on:{\"click\":function($event){_vm.begin = _vm.formatTimestamp(_vm.timeslot.begin, '???')}}}):_vm._e(),(_vm.begin != null)?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.begin),expression:\"begin\"},{name:\"focus\",rawName:\"v-focus\"}],staticClass:\"edit-time\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.begin)},on:{\"keyup\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.changeTimeslotBegin(_vm.begin)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"escape\",undefined,$event.key,undefined)){ return null; }_vm.begin = null}],\"input\":function($event){if($event.target.composing){ return; }_vm.begin=$event.target.value}}}):_vm._e()]),_c('span',{staticClass:\"timeslot-separator\"},[_vm._v(\"–\")]),_c('span',{staticClass:\"timeslot-end\"},[(_vm.end == null)?_c('span',{domProps:{\"textContent\":_vm._s(_vm.formatTimestamp(_vm.timeslot.end, '???'))},on:{\"click\":function($event){_vm.end = _vm.formatTimestamp(_vm.timeslot.end, '???')}}}):_vm._e(),(_vm.end != null)?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.end),expression:\"end\"},{name:\"focus\",rawName:\"v-focus\"}],staticClass:\"edit-time\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.end)},on:{\"keyup\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.changeTimeslotEnd(_vm.end)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"escape\",undefined,$event.key,undefined)){ return null; }_vm.end = null}],\"input\":function($event){if($event.target.composing){ return; }_vm.end=$event.target.value}}}):_vm._e()])]),_c('span',{staticClass:\"timeslot-right\"},[_c('span',{staticClass:\"timeslot-duration\",domProps:{\"textContent\":_vm._s(_vm.formatDuration(_vm.timeslot.duration, { showZero: false }))}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"timeslot\" draggable=\"true\" :class=\"{ active: timeslot.isActive, dragging: dragging }\">\r\n    <span class=\"timeslot-controls\">\r\n      <span class=\"timeslot-control\" title=\"Move to new subtask\" @click=\"$emit('timeslot-to-new-task', timeslot.id)\">\r\n        <i class=\"far fa-window-maximize\"></i>\r\n      </span>\r\n      <span\r\n        class=\"timeslot-control timeslot-remove\"\r\n        title=\"Remove\"\r\n        @click=\"$emit('remove-timeslot-confirmation', { timeslotId: timeslot.id, posY: $event.clientY })\"\r\n      >\r\n        <i class=\"fas fa-trash-alt\"></i>\r\n      </span>\r\n    </span>\r\n\r\n    <span class=\"timeslot-period\">\r\n      <span class=\"timeslot-begin\">\r\n        <span\r\n          v-if=\"begin == null\"\r\n          v-text=\"formatTimestamp(timeslot.begin, '???')\"\r\n          @click=\"begin = formatTimestamp(timeslot.begin, '???')\"\r\n        >\r\n        </span>\r\n\r\n        <input\r\n          class=\"edit-time\"\r\n          type=\"text\"\r\n          v-if=\"begin != null\"\r\n          v-model=\"begin\"\r\n          v-focus\r\n          @keyup.enter=\"changeTimeslotBegin(begin)\"\r\n          @keyup.escape=\"begin = null\"\r\n        />\r\n      </span>\r\n\r\n      <span class=\"timeslot-separator\">&ndash;</span>\r\n\r\n      <span class=\"timeslot-end\">\r\n        <span\r\n          v-if=\"end == null\"\r\n          v-text=\"formatTimestamp(timeslot.end, '???')\"\r\n          @click=\"end = formatTimestamp(timeslot.end, '???')\"\r\n        ></span>\r\n        <input\r\n          type=\"text\"\r\n          class=\"edit-time\"\r\n          v-if=\"end != null\"\r\n          v-model=\"end\"\r\n          v-focus\r\n          @keyup.enter=\"changeTimeslotEnd(end)\"\r\n          @keyup.escape=\"end = null\"\r\n        />\r\n      </span>\r\n    </span>\r\n\r\n    <span class=\"timeslot-right\">\r\n      <span class=\"timeslot-duration\" v-text=\"formatDuration(timeslot.duration, { showZero: false })\"></span>\r\n    </span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as utils from \"../utils.js\";\r\n\r\nexport default {\r\n  name: \"Timeslot\",\r\n  props: {\r\n    timeslot: Object,\r\n    task: Object,\r\n  },\r\n  mounted: function() {\r\n    this.$el.addEventListener(\"dragstart\", this.onDragStart);\r\n    this.$el.addEventListener(\"dragend\", this.onDragEnd);\r\n    document.addEventListener(\"click\", this.onClick);\r\n  },\r\n\r\n  beforeDestroy: function() {\r\n    this.$el.removeEventListener(\"dragstart\", this.onDragStart);\r\n    this.$el.removeEventListener(\"dragend\", this.onDragEnd);\r\n    document.removeEventListener(\"click\", this.onClick);\r\n  },\r\n\r\n  data: function() {\r\n    return {\r\n      // when editing begin or end,\r\n      // the models for the inputs will be begin/end.\r\n      begin: null,\r\n      end: null,\r\n      dragging: false,\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    formatTimestamp: utils.formatTimestamp,\r\n    formatDuration: utils.formatDuration,\r\n\r\n    changeTimeslotBegin: function(time) {\r\n      const timeslotId = this.timeslot.id;\r\n      const timestamp = utils.timeToTimestamp(time);\r\n      this.$emit(\"change-timeslot-begin\", { timeslotId, timestamp });\r\n      this.begin = null;\r\n    },\r\n\r\n    changeTimeslotEnd: function(time) {\r\n      const timeslotId = this.timeslot.id;\r\n      const timestamp = utils.timeToTimestamp(time);\r\n      this.$emit(\"change-timeslot-end\", { timeslotId, timestamp });\r\n      this.end = null;\r\n    },\r\n\r\n    onDragStart: function(ev) {\r\n      ev.stopPropagation();\r\n\r\n      ev.dataTransfer.effectAllowed = \"move\";\r\n      ev.dataTransfer.dropEffect = \"move\";\r\n      ev.dataTransfer.setData(\"timeslotId\", this.timeslot.id);\r\n      ev.dataTransfer.setData(\"taskId\", this.timeslot.taskId);\r\n\r\n      setTimeout(() => (this.dragging = true));\r\n    },\r\n\r\n    onDragEnd: function(ev) {\r\n      ev.preventDefault();\r\n      ev.stopPropagation();\r\n      this.dragging = false;\r\n    },\r\n\r\n    onClick: function(ev) {\r\n      if (ev.target == null || ev.target.parentNode == null) {\r\n        // Ignore\r\n        return;\r\n      }\r\n\r\n      const timeslot = ev.target.closest(\".timeslot\");\r\n      if (timeslot !== this.$el) {\r\n        this.begin = null;\r\n        this.end = null;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import \"../styles/extends.less\";\r\n@import \"../styles/variables.less\";\r\n\r\n#time-tracker {\r\n  .timeslot {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    padding: 0.25em 0;\r\n\r\n    > .timeslot-controls {\r\n      flex: 1;\r\n\r\n      > .timeslot-control {\r\n        visibility: hidden;\r\n        color: @dark;\r\n        padding: 0.35em;\r\n\r\n        > i {\r\n          display: inline-block;\r\n        }\r\n\r\n        &.timeslot-to-task {\r\n          > i {\r\n            transform: rotate(-90deg);\r\n          }\r\n        }\r\n\r\n        &:hover {\r\n          cursor: pointer;\r\n          color: @purple;\r\n\r\n          &.timeslot-remove {\r\n            color: @red;\r\n          }\r\n        }\r\n      }\r\n\r\n      &:hover > .timeslot-control {\r\n        visibility: visible;\r\n      }\r\n    }\r\n\r\n    .timeslot-period {\r\n      flex: 1;\r\n      text-align: center;\r\n      display: flex;\r\n\r\n      .timeslot-begin {\r\n        flex: 4;\r\n        text-align: right;\r\n\r\n        > .edit-time {\r\n          text-align: right;\r\n        }\r\n\r\n        &:hover {\r\n          cursor: text;\r\n        }\r\n      }\r\n\r\n      .timeslot-separator {\r\n        flex: 1;\r\n      }\r\n\r\n      .timeslot-end {\r\n        flex: 4;\r\n        text-align: left;\r\n\r\n        &:hover {\r\n          cursor: text;\r\n        }\r\n      }\r\n\r\n      .edit-time {\r\n        width: 3em;\r\n        border: none;\r\n        font-size: 1em;\r\n        outline: none;\r\n        padding: 0;\r\n        font-weight: bold;\r\n      }\r\n    }\r\n\r\n    &.active .timeslot-end {\r\n      font-weight: bold;\r\n      color: @purple;\r\n    }\r\n\r\n    .timeslot-right {\r\n      flex: 1;\r\n      text-align: right;\r\n\r\n      .timeslot-duration {\r\n        font-size: 0.9em;\r\n        text-align: right;\r\n      }\r\n    }\r\n\r\n    &.dragging {\r\n      &:extend(._dragging all);\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timeslot.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timeslot.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Timeslot.vue?vue&type=template&id=4c57feb0&\"\nimport script from \"./Timeslot.vue?vue&type=script&lang=js&\"\nexport * from \"./Timeslot.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Timeslot.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div\r\n    class=\"task\"\r\n    :class=\"{\r\n      active: task.isActive,\r\n      'active-ancestor': task.isActiveAncestor,\r\n      dropzone: dropzone,\r\n      dragging: dragging,\r\n      subtask: task.parentId != null,\r\n      collapsed: collapsed,\r\n    }\"\r\n  >\r\n    <div class=\"task-head\" draggable=\"true\">\r\n      <div class=\"left\">\r\n        <button type=\"button\" title=\"Start\" v-if=\"!task.isActive\" @click=\"$emit('start-task', task.id)\">\r\n          <i class=\"fas fa-play\"></i>\r\n        </button>\r\n        <button type=\"button\" title=\"Stop\" v-if=\"task.isActive\" @click=\"$emit('stop-task', task.id)\">\r\n          <i class=\"fas fa-stop\"></i>\r\n        </button>\r\n        <button type=\"button\" class=\"add-subtask\" title=\"Add subtask\" @click=\"$emit('add-task', { parentId: task.id })\">\r\n          <i class=\"fas fa-plus-circle\"></i>\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          class=\"toggle-collapse\"\r\n          v-if=\"task.timeslots.length || task.subTasks.length\"\r\n          :title=\"collapsed ? 'Expand' : 'Collapse'\"\r\n          @click=\"collapsed = !collapsed\"\r\n        >\r\n          <i v-if=\"collapsed\" class=\"fas fa-caret-down\"></i>\r\n          <i v-if=\"!collapsed\" class=\"fas fa-caret-up\"></i>\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          title=\"Remove\"\r\n          @click=\"$emit('remove-task-confirmation', { taskId: task.id, posY: $event.clientY })\"\r\n        >\r\n          <i class=\"fas fa-trash-alt\"></i>\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"center\">\r\n        <div v-if=\"!editName\" class=\"task-name\" @click=\"toggleEdit()\" v-text=\"task.name\"></div>\r\n        <input\r\n          type=\"text\"\r\n          class=\"task-name edit\"\r\n          placeholder=\"Task name\"\r\n          v-focus\r\n          v-if=\"editName\"\r\n          v-model=\"task._source.name\"\r\n          @keyup.enter=\"cancelEdit()\"\r\n          @keyup.escape=\"cancelEdit()\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"right\">\r\n        <div class=\"task-duration-wrapper\">\r\n          <span\r\n            class=\"task-duration\"\r\n            v-text=\"formatDuration(task.duration, { showZero: false, showSeconds: task.duration < 60 })\"\r\n          ></span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"task-body\" v-if=\"task.timeslots.length || task.subTasks.length\">\r\n      <div class=\"timeslots\" v-if=\"task.timeslots.length\">\r\n        <Timeslot\r\n          v-for=\"timeslot in task.timeslots\"\r\n          :key=\"timeslot.id\"\r\n          :timeslot=\"timeslot\"\r\n          :task=\"task\"\r\n          @change-timeslot-begin=\"$emit('change-timeslot-begin', $event)\"\r\n          @change-timeslot-end=\"$emit('change-timeslot-end', $event)\"\r\n          @remove-timeslot-confirmation=\"$emit('remove-timeslot-confirmation', $event)\"\r\n          @timeslot-to-new-task=\"$emit('timeslot-to-new-task', $event)\"\r\n          @timeslot-to-task=\"$emit('timeslot-to-task', $event)\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"subtasks\" v-if=\"task.subTasks.length\">\r\n        <Task\r\n          v-for=\"subTask in task.subTasks\"\r\n          :key=\"subTask.id\"\r\n          :task=\"subTask\"\r\n          @add-task=\"$emit('add-task', $event)\"\r\n          @remove-task-confirmation=\"$emit('remove-task-confirmation', $event)\"\r\n          @reset-task=\"$emit('reset-task', $event)\"\r\n          @start-task=\"$emit('start-task', $event)\"\r\n          @stop-task=\"$emit('stop-task', $event)\"\r\n          @move-task=\"$emit('move-task', $event)\"\r\n          @change-timeslot-begin=\"$emit('change-timeslot-begin', $event)\"\r\n          @change-timeslot-end=\"$emit('change-timeslot-end', $event)\"\r\n          @remove-timeslot-confirmation=\"$emit('remove-timeslot-confirmation', $event)\"\r\n          @timeslot-to-new-task=\"$emit('timeslot-to-new-task', $event)\"\r\n          @timeslot-to-task=\"$emit('timeslot-to-task', $event)\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as utils from \"../utils.js\";\r\nimport Timeslot from \"./Timeslot.vue\";\r\n\r\nexport default {\r\n  name: \"Task\",\r\n  components: { Timeslot },\r\n  props: {\r\n    task: Object,\r\n    parentId: Number,\r\n  },\r\n\r\n  mounted: function() {\r\n    const el = this.$el;\r\n\r\n    el.addEventListener(\"dragstart\", this.onDragStart);\r\n    el.addEventListener(\"dragend\", this.onDragEnd);\r\n    el.addEventListener(\"dragover\", this.onDragOver);\r\n    el.addEventListener(\"dragleave\", this.onDragLeave);\r\n    el.addEventListener(\"drop\", this.onDrop);\r\n\r\n    if (!this.task.name) {\r\n      this.editName = true;\r\n    }\r\n\r\n    // When a task is created through a click we do not want to\r\n    // execute the onClick handler for that one.\r\n    // So add event listener on next loop.\r\n    setTimeout(() => document.addEventListener(\"click\", this.onClick));\r\n  },\r\n\r\n  beforeDestroy: function() {\r\n    this.$el.removeEventListener(\"dragstart\", this.onDragStart);\r\n    this.$el.removeEventListener(\"dragend\", this.onDragEnd);\r\n    this.$el.removeEventListener(\"dragover\", this.onDragOver);\r\n    this.$el.removeEventListener(\"drop\", this.onDrop);\r\n    this.$el.removeEventListener(\"dragleave\", this.onDragLeave);\r\n\r\n    document.removeEventListener(\"click\", this.onClick);\r\n  },\r\n\r\n  data: function() {\r\n    return {\r\n      dropzone: false,\r\n      dragging: false,\r\n      editName: false,\r\n      collapsed: false,\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    formatTimestamp: utils.formatTimestamp,\r\n    formatDuration: utils.formatDuration,\r\n\r\n    onDragStart: function(ev) {\r\n      ev.stopPropagation();\r\n\r\n      ev.dataTransfer.effectAllowed = \"move\";\r\n      ev.dataTransfer.dropEffect = \"move\";\r\n      ev.dataTransfer.setData(\"taskId\", this.task.id);\r\n\r\n      // DOM modifications due to changing `this.dragging`\r\n      // can lead to an immediate dragend event,\r\n      // which is why we use a setTimeout to work around that.\r\n      setTimeout(() => (this.dragging = true));\r\n    },\r\n\r\n    onDragEnd: function(ev) {\r\n      ev.preventDefault();\r\n      ev.stopPropagation();\r\n      this.dragging = false;\r\n    },\r\n\r\n    onDragOver: function(ev) {\r\n      ev.preventDefault();\r\n      ev.stopPropagation();\r\n\r\n      if (this.dragging) {\r\n        // Cannot be their own dropzone\r\n        ev.dataTransfer.dropEffect = \"none\";\r\n      } else {\r\n        this.dropzone = true;\r\n      }\r\n    },\r\n\r\n    onDragLeave: function(ev) {\r\n      ev.preventDefault();\r\n\r\n      this.dropzone = false;\r\n    },\r\n\r\n    onDrop: function(ev) {\r\n      ev.preventDefault();\r\n      ev.stopPropagation();\r\n\r\n      this.dropzone = false;\r\n\r\n      const taskId = parseInt(ev.dataTransfer.getData(\"taskId\"), 10);\r\n      const timeslotId = parseInt(ev.dataTransfer.getData(\"timeslotId\"), 10);\r\n\r\n      if (isNaN(taskId)) {\r\n        // Nothing to do\r\n        return;\r\n      }\r\n\r\n      if (!isNaN(timeslotId)) {\r\n        this.onDropTimeslot(timeslotId);\r\n      } else {\r\n        this.onDropTask(taskId);\r\n      }\r\n    },\r\n\r\n    onDropTask: function(taskId) {\r\n      this.$emit(\"move-task\", {\r\n        taskId: taskId,\r\n        parentId: this.task.id,\r\n      });\r\n    },\r\n\r\n    onDropTimeslot: function(timeslotId) {\r\n      this.$emit(\"timeslot-to-task\", {\r\n        id: timeslotId,\r\n        taskId: this.task.id,\r\n      });\r\n    },\r\n\r\n    onClick: function(ev) {\r\n      if (ev.target == null || ev.target.parentNode == null) {\r\n        // Ignore\r\n        return;\r\n      }\r\n\r\n      const task = ev.target.closest(\".task\");\r\n      if (task !== this.$el) {\r\n        this.cancelEdit();\r\n      }\r\n    },\r\n\r\n    toggleEdit: function() {\r\n      this.editName = !this.editName;\r\n    },\r\n\r\n    cancelEdit: function() {\r\n      this.editName = false;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import \"../styles/extends.less\";\r\n@import \"../styles/variables.less\";\r\n\r\n#time-tracker {\r\n  .task {\r\n    margin: 2em 0 0 0;\r\n    background-color: white;\r\n    box-shadow: 0 0 1px 0 lightgrey, 1px 1px 2px grey;\r\n\r\n    ~ .task {\r\n      margin-top: 1em;\r\n    }\r\n\r\n    &.subtask {\r\n      margin-top: 0.5em;\r\n      margin-bottom: 0.5em;\r\n\r\n      ~ .subtask {\r\n        margin-top: 1em;\r\n      }\r\n    }\r\n\r\n    > .task-head {\r\n      padding: 0;\r\n      background-color: @dark;\r\n      color: white;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n\r\n      > .left,\r\n      > .right {\r\n        flex: 2;\r\n      }\r\n\r\n      > .left {\r\n        display: flex;\r\n\r\n        > button {\r\n          flex: 1;\r\n          visibility: hidden;\r\n          padding: 0.5em;\r\n          border: none;\r\n          box-shadow: none;\r\n          color: @light;\r\n          max-width: 2.5em;\r\n\r\n          &.toggle-collapse,\r\n          &.add-subtask {\r\n            > i {\r\n              font-size: 1em;\r\n            }\r\n          }\r\n\r\n          &:hover {\r\n            background-color: white;\r\n            color: @purple;\r\n          }\r\n        }\r\n\r\n        &:hover > button {\r\n          visibility: visible;\r\n        }\r\n\r\n        > span {\r\n          visibility: hidden;\r\n        }\r\n\r\n        &:hover {\r\n          > span {\r\n            visibility: visible;\r\n          }\r\n\r\n          cursor: pointer;\r\n        }\r\n      }\r\n\r\n      > .center {\r\n        flex: 3;\r\n\r\n        .task-name {\r\n          padding: 0.5em 0;\r\n          text-align: center;\r\n\r\n          &:hover {\r\n            cursor: text;\r\n          }\r\n\r\n          &.edit {\r\n            width: 100%;\r\n            border: none;\r\n            font-size: 1em;\r\n\r\n            &:focus {\r\n              &:extend(._focus);\r\n              border: none;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      > .right {\r\n        display: flex;\r\n        justify-content: flex-end;\r\n\r\n        .task-duration-wrapper {\r\n          padding: 0.5em 1em;\r\n\r\n          .task-duration {\r\n            font-size: 0.9em;\r\n            font-weight: bold;\r\n            text-align: right;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    &.subtask > .task-head {\r\n      background-color: #ddd;\r\n      color: @dark;\r\n\r\n      > .left > button {\r\n        color: @dark;\r\n\r\n        &:hover {\r\n          background-color: white;\r\n          color: @purple;\r\n        }\r\n      }\r\n    }\r\n\r\n    > .task-controls {\r\n      display: flex;\r\n\r\n      > button {\r\n        flex: 1;\r\n      }\r\n    }\r\n\r\n    > .task-body {\r\n      padding: 0.5em 1em;\r\n\r\n      .subtasks {\r\n        font-size: 0.95em;\r\n      }\r\n    }\r\n\r\n    &.active {\r\n      > .task-head {\r\n        background-color: @purple;\r\n        color: white;\r\n\r\n        > .left > button {\r\n          color: white;\r\n\r\n          &:hover {\r\n            color: @purple;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    &.active-ancestor {\r\n      > .task-head > .right > .task-duration-wrapper {\r\n        background-color: @purple;\r\n        color: white;\r\n      }\r\n    }\r\n\r\n    &.dropzone {\r\n      &:extend(._dropzone);\r\n      box-shadow: none;\r\n    }\r\n\r\n    &.dragging {\r\n      &:extend(._dragging all);\r\n      box-shadow: none;\r\n    }\r\n\r\n    &.collapsed {\r\n      > .task-body {\r\n        display: none;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Task.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Task.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Task.vue?vue&type=template&id=98ef21e6&\"\nimport script from \"./Task.vue?vue&type=script&lang=js&\"\nexport * from \"./Task.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Task.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"confirm-dialog-wrapper\"},[_c('div',{staticClass:\"confirm-dialog\"},[_c('div',{staticClass:\"text\",domProps:{\"textContent\":_vm._s(_vm.config.text)}}),_c('div',{staticClass:\"buttons\"},[_c('button',{staticClass:\"cancel\",attrs:{\"type\":\"button\"},domProps:{\"textContent\":_vm._s(_vm.config.cancelText)},on:{\"click\":function($event){return _vm.cancel()}}}),_c('button',{staticClass:\"ok\",attrs:{\"type\":\"button\"},domProps:{\"textContent\":_vm._s(_vm.config.okText)},on:{\"click\":function($event){return _vm.ok()}}})])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"confirm-dialog-wrapper\">\r\n    <div class=\"confirm-dialog\">\r\n      <div class=\"text\" v-text=\"config.text\"></div>\r\n      <div class=\"buttons\">\r\n        <button class=\"cancel\" type=\"button\" @click=\"cancel()\" v-text=\"config.cancelText\"></button>\r\n        <button class=\"ok\" type=\"button\" @click=\"ok()\" v-text=\"config.okText\"></button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as utils from \"../utils.js\";\r\n\r\nexport default {\r\n  name: \"confirm-dialog\",\r\n  props: {\r\n    config: Object,\r\n  },\r\n\r\n  data: () => ({\r\n    minMarginPercentage: 0.02,\r\n  }),\r\n\r\n  mounted: function() {\r\n    this.$el.addEventListener(\"click\", this.onClick);\r\n    document.addEventListener(\"keyup\", this.onKeyup);\r\n\r\n    if (this.config.posY != null) {\r\n      const dialog = this.$el.querySelector(\".confirm-dialog\");\r\n      if (dialog != null) {\r\n        const viewport = this.getViewport();\r\n        // Vertical margin: % of max height\r\n        const minMargin = this.minMarginPercentage * viewport.height;\r\n        const dialogRect = dialog.getBoundingClientRect();\r\n\r\n        // When the dialog with margins on both sides still has space left in the viewport\r\n        // we consider it to be rearrangeable\r\n        const rearrangeable = dialogRect.height + 2 * minMargin < viewport.height;\r\n\r\n        let top;\r\n        if (rearrangeable) {\r\n          // Target position for dialog: vertically centered at posY.\r\n          top = this.config.posY - dialog.clientHeight / 2;\r\n          const bottom = top + dialogRect.height;\r\n          if (top < minMargin) {\r\n            top = minMargin;\r\n          } else if (viewport.height - bottom < minMargin) {\r\n            top = viewport.height - minMargin - dialogRect.height;\r\n          }\r\n        } else {\r\n          // Not rearrangable, simply center vertically in viewport.\r\n          // This ignores config.posY.\r\n          top = viewport.height / 2 - dialog.clientHeight / 2;\r\n        }\r\n\r\n        dialog.style.position = \"absolute\";\r\n        dialog.style.top = top + \"px\";\r\n      }\r\n    }\r\n  },\r\n\r\n  beforeDestroy: function() {\r\n    this.$el.removeEventListener(\"click\", this.onClick);\r\n    document.removeEventListener(\"keyup\", this.onKeyup);\r\n  },\r\n\r\n  methods: {\r\n    ok: function() {\r\n      utils.runIfFn(this.config.ok);\r\n      utils.runIfFn(this.config.always);\r\n    },\r\n\r\n    cancel: function() {\r\n      utils.runIfFn(this.config.cancel);\r\n      utils.runIfFn(this.config.always);\r\n    },\r\n\r\n    onClick: function(ev) {\r\n      ev.preventDefault();\r\n      ev.stopPropagation();\r\n\r\n      if (ev.target === this.$el) {\r\n        this.cancel();\r\n      }\r\n    },\r\n\r\n    onKeyup: function(ev) {\r\n      if (ev.keyCode === 27) {\r\n        // Cancel on escape\r\n        this.cancel();\r\n      }\r\n    },\r\n\r\n    getViewport: function() {\r\n      return {\r\n        top: 0,\r\n        left: 0,\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n      };\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import \"../styles/extends.less\";\r\n\r\n#time-tracker {\r\n  .confirm-dialog-wrapper {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-color: rgba(0, 0, 0, 0.8);\r\n\r\n    > .confirm-dialog {\r\n      background-color: white;\r\n      padding: 2em;\r\n      min-width: 15em;\r\n      border-radius: 0.2em;\r\n\r\n      > .text {\r\n        display: block;\r\n        margin-bottom: 1.5em;\r\n        font-weight: bold;\r\n        text-align: center;\r\n      }\r\n\r\n      > .buttons {\r\n        display: flex;\r\n\r\n        > button {\r\n          flex: 1;\r\n\r\n          &:focus,\r\n          &:hover {\r\n            &:extend(._focus);\r\n          }\r\n\r\n          &:active {\r\n            &:extend(._active);\r\n          }\r\n        }\r\n\r\n        > .ok {\r\n          margin-left: 1em;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfirmDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfirmDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConfirmDialog.vue?vue&type=template&id=2e237aaa&\"\nimport script from \"./ConfirmDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./ConfirmDialog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ConfirmDialog.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div id=\"time-tracker\" :class=\"{ loaded: 1, dropzone: dropzone }\">\r\n    <main>\r\n      <div class=\"top-container\">\r\n        <div class=\"left\">\r\n          <button v-if=\"rootTasks.length > 0\" type=\"button\" @click=\"clearAll($event.clientY)\" class=\"remove-all\">\r\n            <i class=\"far fa-trash-alt\"></i>\r\n            <span class=\"text\">remove all</span>\r\n          </button>\r\n        </div>\r\n        <div class=\"center\">\r\n          <input class=\"new-task\" type=\"text\" placeholder=\"New task\" @keyup.enter=\"inputTask($event.target)\" />\r\n        </div>\r\n        <div class=\"right\">\r\n          <div class=\"total-duration\" :class=\"{ visible: absoluteTotalDuration > 0 }\">\r\n            <i class=\"far fa-clock\"></i>\r\n            <span\r\n              class=\"clock\"\r\n              v-text=\"formatDuration(totalDuration, { showSeconds: absoluteTotalDuration < 60 })\"\r\n            ></span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <Task\r\n        v-for=\"task in rootTasks\"\r\n        :key=\"task.id\"\r\n        :task=\"task\"\r\n        @add-task=\"addTask($event)\"\r\n        @remove-task-confirmation=\"removeTaskConfirmation($event)\"\r\n        @reset-task=\"resetTask($event)\"\r\n        @start-task=\"startTask($event)\"\r\n        @stop-task=\"stopTask($event)\"\r\n        @move-task=\"moveTask($event)\"\r\n        @change-timeslot-begin=\"changeTimeslotBegin($event)\"\r\n        @change-timeslot-end=\"changeTimeslotEnd($event)\"\r\n        @remove-timeslot-confirmation=\"removeTimeslotConfirmation($event)\"\r\n        @timeslot-to-new-task=\"timeslotToNewTask($event)\"\r\n        @timeslot-to-task=\"timeslotToTask($event)\"\r\n      />\r\n    </main>\r\n\r\n    <ConfirmDialog v-if=\"confirmation.ok\" :config=\"confirmation\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from \"vue\";\r\nimport * as utils from \"./utils.js\";\r\nimport Task from \"./components/Task.vue\";\r\nimport ConfirmDialog from \"./components/ConfirmDialog.vue\";\r\nimport debounce from \"lodash/debounce\";\r\n\r\nconst initialId = 1;\r\n\r\nVue.directive(\"focus\", {\r\n  inserted: el => el.focus(),\r\n});\r\n\r\nexport default {\r\n  name: \"app\",\r\n  components: {\r\n    Task,\r\n    ConfirmDialog,\r\n  },\r\n\r\n  data: () => {\r\n    const state = {\r\n      // Persisted state\r\n      nextId: initialId,\r\n      tasksById: {},\r\n      timeslotsById: {},\r\n\r\n      // Transient state\r\n      now: Date.now(),\r\n      dropzone: false,\r\n\r\n      confirmation: {\r\n        ok: null,\r\n        okText: null,\r\n        cancel: null,\r\n        cancelText: null,\r\n        text: null,\r\n        always: null,\r\n        posY: null,\r\n      },\r\n    };\r\n\r\n    const savedState = utils.getFromStorage(\"time-tracker\");\r\n    if (savedState != null) {\r\n      Object.assign(state, savedState);\r\n    }\r\n\r\n    return state;\r\n  },\r\n\r\n  computed: {\r\n    tasks: function() {\r\n      return Object.values(this.tasksById);\r\n    },\r\n\r\n    timeslots: function() {\r\n      return Object.values(this.timeslotsById);\r\n    },\r\n\r\n    timeslotsByTask: function() {\r\n      const timeslotsByTask = {};\r\n\r\n      for (const timeslot of this.timeslots) {\r\n        if (timeslot.taskId != null) {\r\n          if (timeslotsByTask[timeslot.taskId] == null) {\r\n            timeslotsByTask[timeslot.taskId] = [];\r\n          }\r\n\r\n          timeslotsByTask[timeslot.taskId].push(timeslot);\r\n        }\r\n      }\r\n\r\n      return timeslotsByTask;\r\n    },\r\n\r\n    computedTasks: function() {\r\n      return this.tasks.map(this.getComputedTask);\r\n    },\r\n\r\n    rootTasks: function() {\r\n      return this.computedTasks.filter(task => task.parentId == null);\r\n    },\r\n\r\n    subTasks: function() {\r\n      const subTasks = {};\r\n\r\n      for (const task of this.tasks) {\r\n        if (task.parentId != null) {\r\n          if (subTasks[task.parentId] == null) {\r\n            subTasks[task.parentId] = [];\r\n          }\r\n\r\n          subTasks[task.parentId].push(task);\r\n        }\r\n      }\r\n\r\n      return subTasks;\r\n    },\r\n\r\n    activeTask: function() {\r\n      return this.computedTasks.find(task => task.isActive);\r\n    },\r\n\r\n    ancestors: function() {\r\n      const ancestors = {};\r\n\r\n      const cache = {};\r\n\r\n      for (const task of this.tasks) {\r\n        ancestors[task.id] = this.getAncestors(task, cache);\r\n      }\r\n\r\n      return ancestors;\r\n    },\r\n\r\n    totalDuration: function() {\r\n      return this.rootTasks.reduce((sum, task) => sum + this.getTaskDuration(task), 0);\r\n    },\r\n\r\n    absoluteTotalDuration: function() {\r\n      return Math.abs(this.totalDuration);\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    getComputedTask: function(task) {\r\n      const timeslots = this.timeslotsByTask[task.id] || [];\r\n\r\n      const subTasks = this.getSubTasks(task).map(this.getComputedTask);\r\n\r\n      return Object.assign({}, task, {\r\n        duration: this.getTaskDuration(task),\r\n        timeslots: timeslots.map(this.getComputedTimeslot),\r\n        subTasks,\r\n        isActive: timeslots.some(timeslot => timeslot.begin != null && timeslot.end == null),\r\n        isActiveAncestor: subTasks.some(subTask => subTask.isActive || subTask.isActiveAncestor),\r\n\r\n        // Reference to source object\r\n        _source: task,\r\n      });\r\n    },\r\n\r\n    getSubTasks: function(parentTask) {\r\n      const subTasks = [];\r\n\r\n      for (const task of this.tasks) {\r\n        if (task.parentId === parentTask.id) {\r\n          subTasks.push(task);\r\n        }\r\n      }\r\n\r\n      return subTasks;\r\n    },\r\n\r\n    getComputedTimeslot: function(timeslot) {\r\n      return Object.assign({}, timeslot, {\r\n        isActive: timeslot.begin != null && timeslot.end == null,\r\n        end: timeslot.end || this.now,\r\n        duration: this.getTimeslotDuration(timeslot),\r\n\r\n        // Reference to source object\r\n        _source: timeslot,\r\n      });\r\n    },\r\n\r\n    getAncestors: function(task, cache) {\r\n      const parent = this.tasksById[task.parentId];\r\n      if (parent == null) {\r\n        return [];\r\n      }\r\n\r\n      if (cache[task.id] != null) {\r\n        return cache[task.id];\r\n      }\r\n\r\n      if (parent != null) {\r\n        const ancestors = [parent, ...this.getAncestors(parent, cache)];\r\n        cache[task.id] = ancestors;\r\n        return ancestors;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * @returns {boolean} true if taskA is an ancestor of taskB\r\n     */\r\n    isAncestor: function(taskA, taskB) {\r\n      return this.ancestors[taskB.id].indexOf(taskA) > -1;\r\n    },\r\n\r\n    save: function() {\r\n      // Persist subset of state\r\n      const { nextId, tasksById, timeslotsById } = this;\r\n      const toSave = { nextId, tasksById, timeslotsById };\r\n      utils.saveToStorage(\"time-tracker\", toSave);\r\n    },\r\n\r\n    inputTask: function(inputElement) {\r\n      this.addTask({ name: inputElement.value });\r\n      inputElement.value = \"\";\r\n    },\r\n\r\n    addTask: function({ name, parentId }) {\r\n      const newTask = this.createTask(name, parentId);\r\n      this.startTask(newTask.id);\r\n    },\r\n\r\n    createTask: function(name, parentId) {\r\n      const id = this.nextId++;\r\n\r\n      const task = {\r\n        id,\r\n        parentId,\r\n        name: name,\r\n      };\r\n\r\n      Vue.set(this.tasksById, id, task);\r\n\r\n      return task;\r\n    },\r\n\r\n    moveTask: function({ taskId, parentId }) {\r\n      if (taskId != null && parentId != null && taskId !== parentId) {\r\n        const task = this.tasksById[taskId];\r\n        const parent = this.tasksById[parentId];\r\n\r\n        if (task == null || parent == null || task.parentId === parent.id) {\r\n          return;\r\n        }\r\n\r\n        if (this.isAncestor(task, parent)) {\r\n          // A task cannot be moved to its descendant,\r\n          // that can create a cycle\r\n          return;\r\n        }\r\n\r\n        this.updateTask(taskId, task => {\r\n          Vue.set(task, \"parentId\", parentId);\r\n          return task;\r\n        });\r\n      }\r\n    },\r\n\r\n    changeTimeslotBegin: function(args) {\r\n      this.changeTimeslotTimestamp(args, \"begin\");\r\n    },\r\n\r\n    changeTimeslotEnd: function(args) {\r\n      this.changeTimeslotTimestamp(args, \"end\");\r\n    },\r\n\r\n    changeTimeslotTimestamp: function(args, property) {\r\n      const timeslotId = args.timeslotId;\r\n      const timestamp = args.timestamp;\r\n\r\n      this.updateTimeslot(timeslotId, timeslot => {\r\n        Vue.set(timeslot, property, timestamp);\r\n        return timeslot;\r\n      });\r\n    },\r\n\r\n    onDrop: function(ev) {\r\n      this.dropzone = false;\r\n\r\n      const taskId = ev.dataTransfer.getData(\"taskId\");\r\n      if (!taskId) {\r\n        return;\r\n      }\r\n\r\n      this.updateTask(taskId, task => {\r\n        Vue.delete(task, \"parentId\");\r\n        return task;\r\n      });\r\n    },\r\n\r\n    onDragOver: function(ev) {\r\n      ev.preventDefault();\r\n\r\n      const isTimeslot = ev.dataTransfer.types.indexOf(\"timeslotid\") > -1;\r\n      if (isTimeslot) {\r\n        ev.dataTransfer.dropEffect = \"none\";\r\n      } else {\r\n        this.dropzone = true;\r\n      }\r\n    },\r\n\r\n    onDragLeave: function(ev) {\r\n      ev.preventDefault();\r\n\r\n      this.dropzone = false;\r\n    },\r\n\r\n    updateTask: function(id, updateFn) {\r\n      const task = this.tasksById[id];\r\n      if (task == null) {\r\n        return;\r\n      }\r\n\r\n      updateFn(task);\r\n    },\r\n\r\n    updateTimeslot: function(id, updateFn, doneFn) {\r\n      const currentTimeslot = this.timeslotsById[id];\r\n      if (currentTimeslot == null) {\r\n        console.warn(`No timeslot found with id ${id}`);\r\n        return;\r\n      }\r\n\r\n      const newTimeslot = updateFn(currentTimeslot);\r\n      Vue.set(this.timeslotsById, newTimeslot.id, newTimeslot);\r\n      if (typeof doneFn === \"function\") {\r\n        doneFn();\r\n      }\r\n    },\r\n\r\n    startTask: function(id) {\r\n      const oldTask = this.activeTask;\r\n      if (oldTask && oldTask.id !== id) {\r\n        this.stopTask(oldTask.id);\r\n      }\r\n\r\n      this.updateTask(id, task => {\r\n        this.createTimeslot(id);\r\n        return task;\r\n      });\r\n    },\r\n\r\n    stopTask: function(id) {\r\n      this.updateTask(id, task => {\r\n        if (task == null) {\r\n          return;\r\n        }\r\n\r\n        const timeslots = this.timeslotsByTask[id] || [];\r\n        const activeSlots = timeslots.filter(slot => slot.begin != null && slot.end == null);\r\n\r\n        const now = Date.now();\r\n\r\n        for (const activeSlot of activeSlots) {\r\n          Vue.set(activeSlot, \"end\", now);\r\n        }\r\n\r\n        return task;\r\n      });\r\n    },\r\n\r\n    removeTask: function(id) {\r\n      if (!this.tasksById[id]) {\r\n        // Does not exist\r\n        return;\r\n      }\r\n\r\n      Vue.delete(this.tasksById, id);\r\n\r\n      const subTasks = this.subTasks[id];\r\n      if (Array.isArray(subTasks)) {\r\n        for (const subTask of subTasks) {\r\n          this.removeTask(subTask.id);\r\n        }\r\n      }\r\n\r\n      const timeslots = this.timeslotsByTask[id];\r\n      if (Array.isArray(timeslots)) {\r\n        for (const timeslot of timeslots) {\r\n          this.removeTimeslot(timeslot.id);\r\n        }\r\n      }\r\n\r\n      if (this.tasks.length === 0) {\r\n        this.nextId = initialId;\r\n      }\r\n    },\r\n\r\n    removeTaskConfirmation: function(evt) {\r\n      const taskId = evt.taskId;\r\n\r\n      const task = this.tasksById[taskId];\r\n      if (task == null) {\r\n        return;\r\n      }\r\n\r\n      const taskName = task.name || \"<no name>\";\r\n\r\n      this.showConfirmation({\r\n        text: `Delete ${taskName}?`,\r\n        ok: () => this.removeTask(taskId),\r\n        always: this.clearConfirmation,\r\n        posY: evt.posY,\r\n      });\r\n    },\r\n\r\n    showConfirmation: function({ text, ok, always, cancel, posY, okText = \"Yes\", cancelText = \"No\" }) {\r\n      Object.assign(this.confirmation, { text, ok, always, cancel, posY, okText, cancelText });\r\n    },\r\n\r\n    clearConfirmation: function() {\r\n      Object.keys(this.confirmation).forEach(key => (this.confirmation[key] = null));\r\n    },\r\n\r\n    createTimeslot: function(taskId) {\r\n      const id = this.nextId++;\r\n\r\n      this.setNow();\r\n\r\n      const timeslot = {\r\n        id,\r\n        taskId,\r\n        begin: this.now,\r\n      };\r\n\r\n      Vue.set(this.timeslotsById, id, timeslot);\r\n\r\n      return timeslot;\r\n    },\r\n\r\n    removeTimeslot: function(id) {\r\n      Vue.delete(this.timeslotsById, id);\r\n    },\r\n\r\n    removeTimeslotConfirmation: function(evt) {\r\n      const timeslotId = evt.timeslotId;\r\n      const timeslot = this.timeslotsById[timeslotId];\r\n      if (timeslot == null) {\r\n        return;\r\n      }\r\n\r\n      const task = this.tasksById[timeslot.taskId];\r\n      const taskName = (task && task.name) || \"<no task>\";\r\n\r\n      const computed = this.getComputedTimeslot(timeslot);\r\n      const begin = utils.formatTimestamp(computed.begin, \"???\");\r\n      const end = utils.formatTimestamp(computed.end, \"???\");\r\n\r\n      this.showConfirmation({\r\n        text: `Remove ${begin} - ${end} of ${taskName}?`,\r\n        ok: () => this.removeTimeslot(timeslotId),\r\n        always: this.clearConfirmation,\r\n        posY: evt.posY,\r\n      });\r\n    },\r\n\r\n    timeslotToNewTask: function(id) {\r\n      const timeslot = this.timeslotsById[id];\r\n\r\n      if (timeslot == null) {\r\n        return;\r\n      }\r\n\r\n      const newTask = this.createTask(null, timeslot.taskId);\r\n      this.timeslotToTask({ id, taskId: newTask.id });\r\n    },\r\n\r\n    timeslotToTask: function({ id, taskId }) {\r\n      if (this.tasksById[taskId] == null) {\r\n        return;\r\n      }\r\n\r\n      this.updateTimeslot(id, timeslot => {\r\n        Vue.set(timeslot, \"taskId\", taskId);\r\n        return timeslot;\r\n      });\r\n    },\r\n\r\n    clearAll: function(posY) {\r\n      const remove = () => {\r\n        this.nextId = initialId;\r\n        for (const taskId in this.tasksById) {\r\n          Vue.delete(this.tasksById, taskId);\r\n        }\r\n        for (const tsId in this.timeslotsById) {\r\n          Vue.delete(this.timeslotsById, tsId);\r\n        }\r\n      };\r\n\r\n      this.showConfirmation({\r\n        text: \"Remove all tasks?\",\r\n        ok: remove,\r\n        always: this.clearConfirmation,\r\n        posY: posY,\r\n      });\r\n    },\r\n\r\n    resetTask: function(id) {\r\n      this.updateTask(id, task => {\r\n        this.clearTimeslots(id);\r\n        return task;\r\n      });\r\n    },\r\n\r\n    clearTimeslots: function(taskId) {\r\n      const timeslots = this.timeslotsByTask[taskId];\r\n      if (Array.isArray(timeslots)) {\r\n        for (const timeslot of timeslots) {\r\n          Vue.delete(this.timeslotsById, timeslot.id);\r\n        }\r\n      }\r\n    },\r\n\r\n    getTimeslotDuration: function(ts) {\r\n      if (ts == null || ts.begin == null) {\r\n        return 0;\r\n      }\r\n\r\n      const end = ts.end || this.now;\r\n\r\n      return Math.round((end - ts.begin) / 1000);\r\n    },\r\n\r\n    getTaskDuration: function(task) {\r\n      const timeslots = this.timeslotsByTask[task.id] || [];\r\n      const taskSeconds = timeslots.reduce((sum, ts) => sum + this.getTimeslotDuration(ts), 0);\r\n\r\n      const subTasks = this.subTasks[task.id];\r\n      let subTasksSeconds = 0;\r\n      if (Array.isArray(subTasks)) {\r\n        subTasksSeconds = subTasks.reduce((sum, subTask) => sum + this.getTaskDuration(subTask), 0);\r\n      }\r\n\r\n      return taskSeconds + subTasksSeconds;\r\n    },\r\n\r\n    updateDocumentTitle: function() {\r\n      if (this.activeTask == null || this.activeTask.duration == null) {\r\n        if (document.title !== this.documentTitle) {\r\n          document.title = this.documentTitle;\r\n        }\r\n      } else {\r\n        const duration = utils.formatDuration(this.activeTask.duration, {\r\n          showZero: false,\r\n          showSeconds: Math.abs(this.activeTask.duration) < 60,\r\n        });\r\n\r\n        if (duration != null) {\r\n          const name = this.activeTask.name || \"\";\r\n          document.title = `${duration} - ${name}`;\r\n        }\r\n      }\r\n    },\r\n\r\n    formatDuration: utils.formatDuration,\r\n\r\n    setNow: function() {\r\n      this.now = Date.now();\r\n    },\r\n\r\n    mainLoop: function(timeout) {\r\n      this.setNow();\r\n      this.updateDocumentTitle();\r\n      setTimeout(() => this.mainLoop(timeout), timeout);\r\n    },\r\n  },\r\n\r\n  mounted: function() {\r\n    this.documentTitle = document.title;\r\n\r\n    Vue.nextTick(() => this.mainLoop(1000));\r\n\r\n    this.$el.addEventListener(\"drop\", this.onDrop);\r\n    this.$el.addEventListener(\"dragover\", this.onDragOver);\r\n    this.$el.addEventListener(\"dragleave\", this.onDragLeave);\r\n\r\n    const debouncedSave = debounce(this.save, 250);\r\n    this.$watch(\"tasksById\", debouncedSave, { deep: true });\r\n    this.$watch(\"timeslotsById\", debouncedSave, { deep: true });\r\n  },\r\n\r\n  beforeDestroy: function() {\r\n    this.$el.removeEventListener(\"drop\", this.onDrop);\r\n    this.$el.removeEventListener(\"dragover\", this.onDragOver);\r\n    this.$el.removeEventListener(\"dragleave\", this.onDragLeave);\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import \"styles/extends.less\";\r\n@import \"styles/variables.less\";\r\n\r\n* {\r\n  box-sizing: border-box;\r\n  font-family: Calibri, sans-serif;\r\n}\r\n\r\nhtml {\r\n  // Minimum font-size (usually 12px)\r\n  font-size: 75%;\r\n}\r\n\r\n@media screen and (min-width: 300px) {\r\n  html {\r\n    // Dynamic font size: scale between 12px and 16px\r\n    font-size: @dynamicFontSize;\r\n  }\r\n}\r\n\r\n@media screen and (min-width: 600px) {\r\n  html {\r\n    // Maximum font-size (usually 16px)\r\n    font-size: 100%;\r\n  }\r\n}\r\n\r\nbody {\r\n  padding: 0;\r\n  margin: 0;\r\n  background-color: @dark;\r\n}\r\n\r\nmain {\r\n  flex: 1;\r\n}\r\n\r\n#time-tracker {\r\n  padding: 2rem;\r\n  margin: 0 auto;\r\n  display: none;\r\n  max-width: 600px;\r\n  color: @dark;\r\n  background-color: white;\r\n\r\n  @media screen and (min-width: 600px) {\r\n    margin: 1rem auto;\r\n    border-radius: 0.5rem;\r\n  }\r\n\r\n  *[draggable=\"true\"] {\r\n    cursor: move;\r\n  }\r\n\r\n  &.loaded {\r\n    display: flex;\r\n    justify-content: center;\r\n  }\r\n\r\n  ul {\r\n    list-style-type: none;\r\n    padding: 0 0 0 1em;\r\n    margin: 0;\r\n  }\r\n\r\n  button {\r\n    font-size: 1em;\r\n    padding: 0.4em 0.8em;\r\n    background: 0 0;\r\n    border: 1px solid lightgray;\r\n    box-shadow: 1px 1px 1px 0 lightgray;\r\n    outline: 0;\r\n\r\n    &:hover {\r\n      cursor: pointer;\r\n    }\r\n  }\r\n\r\n  input {\r\n    outline: none;\r\n  }\r\n\r\n  .top-container {\r\n    position: relative;\r\n    justify-content: center;\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    > .left,\r\n    > .right {\r\n      flex: 1;\r\n    }\r\n\r\n    @media screen and (max-width: 320px) {\r\n      > .left {\r\n        flex: 0;\r\n      }\r\n    }\r\n\r\n    > .center {\r\n      flex: 2;\r\n    }\r\n\r\n    .new-task {\r\n      &:extend(._shadow);\r\n\r\n      font-size: 1em;\r\n      padding: 0.8em 1.2em;\r\n      border: 1px solid @light;\r\n      width: 100%;\r\n\r\n      &:focus {\r\n        &:extend(._focus);\r\n      }\r\n    }\r\n\r\n    .total-duration {\r\n      color: #888a85;\r\n      text-align: right;\r\n      font-size: 1em;\r\n      margin-left: 0.5em;\r\n      visibility: hidden;\r\n\r\n      &.visible {\r\n        visibility: visible;\r\n      }\r\n\r\n      > .clock {\r\n        margin-left: 0.25em;\r\n      }\r\n    }\r\n  }\r\n\r\n  .remove-all {\r\n    background-color: white;\r\n    padding: 0.5rem 0.8rem;\r\n\r\n    .text {\r\n      font-size: 0.9rem;\r\n      margin-left: 0.4rem;\r\n      display: none;\r\n    }\r\n    &:hover,\r\n    &:focus {\r\n      &:extend(._focus);\r\n\r\n      .text {\r\n        display: inline;\r\n      }\r\n    }\r\n    &:active {\r\n      &:extend(._active);\r\n    }\r\n  }\r\n\r\n  &.dropzone {\r\n    &:extend(._dropzone);\r\n    border-radius: 0;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=47b6a7f1&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\r\nimport App from \"./App.vue\";\r\n\r\nVue.config.productionTip = false;\r\n\r\nnew Vue({\r\n  render: h => h(App),\r\n}).$mount(\"#app\");\r\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfirmDialog.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfirmDialog.vue?vue&type=style&index=0&lang=less&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=less&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Task.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Task.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}